<app-vendor-dashboard-header></app-vendor-dashboard-header>
<div class="dashboard_body">
  <app-vendor-side-menu></app-vendor-side-menu>
  <div class="middle_vendor_dasboard">
    <div class="middle_content">
      <!-- <p class="lookingGuidelinesPara">Listing face masks? Follow the <a>guidelines</a></p> -->
      <div class="headingBox">
        <div class="whiteHeadingBox">
          <h3>{{promotionDetail?.title}}</h3>
          <p><a routerLink="/promotions/" >Promotions</a></p>
          <div class="editTopPromotions" *ngIf="promotionDetail?.status == 'active'" >
            <p>Last updated on {{promotionDetail?.updated_at_str}} <span class="activePromo">Active</span></p>
            <!-- <a class="end_promotion_link" (click)="openEndPromotion(content)"><span class="end_promotion_span"><i class="fa-solid fa-ban"></i></span> End Promotion</a>  -->
            <!-- <a class="delete_promotion" (click)="openEndPromotion(content)"><img src="assets/images/delete_icon2.svg" alt="" />Delete</a> -->
            <a class="delete_promotion" (click)="openEndPromotion(content)">End promotion</a>
          </div>
          <div class="editTopPromotions" *ngIf="promotionDetail?.status == 'deactivated'" >
            <p>Last updated on {{promotionDetail?.updated_at_str}} <span class="activePromo">Deactivate</span></p>
          </div>
        </div>
      </div>
      <div class="vendor_promotions_body" *ngIf="promotionDetail?.status == 'active'" >
        <h2>This promotion is currently live!</h2>
        <div class="promo_Details_inner">
          <h3>Promotion dates</h3>
          <p>Start: {{promotionDetail?.from_date_str}}<br>
            End: {{promotionDetail?.to_date_str}} </p>
          <h3>Promotion details:</h3>
          <ul class="promDtlsList">
            <li *ngIf="type != 'PRODUCT'">{{promotionDetail?.discount_amount}}% off orders ${{promotionDetail?.ordered_amount}}+</li>
            <li>{{promotionDetail?.remaining_days}} days left</li>
          </ul>
        </div>
      </div>

      <div class="vendor_promotions_body">
        <h3>Promotion name</h3>
        <ul class="promForm1">
          <li>
            <label class="form-label">This is how your promotion will appear to retailers at checkout</label>
            <input readonly type="text" name="" value="" class="form-control" onKeyPress="if(this.value.length==20) return false;" name="title" [(ngModel)]="title" maxlength="20" #titleVal >
            <!-- <span class="characterLimits">{{titleVal.value.length}}/20</span> -->
          </li>
        </ul>
      </div>
      <div class="vendor_promotions_body">
        <h3>Promotion dates</h3>
        <ul class="row dateForm1">
          <li class="col-lg-2 date-list">
            <input type="text" class="form-control calnInput" readonly [value]="promotionDetail?.from_date">
          </li>
          <li class="col-lg-1 custom_cal_lg"><span class="fromSpan">-</span></li>
          <li class="col-lg-2">
            <input type="text" class="form-control calnInput" readonly [value]="promotionDetail?.to_date">
          </li>
        </ul>
      </div>
      <div class="vendor_promotions_body">
        <h3>Promotion eligibility</h3>
        <ul class="row promoForm2">
          <li class="col-lg-3">
            <label class="form-label">Who will you be promoting to?</label>
            <ul class="formDiv">
              <li><span class="radioLabel">All my customers
                <input type="radio" [value]="1" name="promotion_to" [(ngModel)]="promotion_to" disabled>
                <span class="checkmark"></span> </span> </li>
              <li><span class="radioLabel">New customers only
                <input type="radio" [value]="2" name="promotion_to" [(ngModel)]="promotion_to" checked="checked" disabled>
                <span class="checkmark"></span> </span></li>
              <li><span class="radioLabel">Returning customers only
                <input type="radio" [value]="3" name="promotion_to" [(ngModel)]="promotion_to" disabled>
                <span class="checkmark"></span> </span></li>
            </ul>
          </li>
          <li class="col-lg-3">
            <label class="form-label">Where will this promotion be available?</label>
            <ul class="checkBoxList">
              <li *ngFor="let item of promotionCountryArry">
                <div class="form-check">
                  <input [value]="item.id" disabled type="checkbox" class="form-check-input" [checked]="promoCountrySelected?.includes(item.id) && true " (change)="promoCountryChange($event)" >
                  <label class="form-check-label">{{item?.country_name}}</label>
                </div>
              </li>
              
            </ul>
          </li>
        </ul>
      </div>
      <div class="vendor_promotions_body">
        <h3>Promotion details</h3>
        <ul class="row promoForm2">
          <li class="col-lg-4">
            <label class="form-label">Add tiers to create a "buy more, save more" promotion</label>
            <ul class="formDiv">
              <li><span class="radioLabel">1 Tier
                <input type="radio" [value]="1" name="promotion_tier" [(ngModel)]="promotion_tier" disabled>
                <span class="checkmark"></span> </span> </li>
              <li><span class="radioLabel">2 Tiers
                <input type="radio" [value]="2" name="promotion_tier" [(ngModel)]="promotion_tier" disabled>
                <span class="checkmark"></span> </span></li>
              <li><span class="radioLabel">3 Tier
                <input type="radio" [value]="3" name="promotion_tier" [(ngModel)]="promotion_tier" disabled>
                <span class="checkmark"></span> </span></li>
            </ul>
          </li>
          <li class="col-lg-4" *ngIf="type != 'PRODUCT'">
            <label class="form-label">What type of promotion will you offer?</label>
            <ul class="formDiv">
              <li><span class="radioLabel">% Off
                <input type="radio" [value]="1" name="promotion_offer_type" [(ngModel)]="promotion_offer_type" disabled>
                <span class="checkmark"></span> </span> </li>
              <li><span class="radioLabel">$ Off
                <input type="radio" [value]="2" name="promotion_offer_type" [(ngModel)]="promotion_offer_type" disabled>
                <span class="checkmark"></span> </span></li>
              <li><span class="radioLabel">Free Shipping
                <input type="radio" [value]="3" name="promotion_offer_type" [(ngModel)]="promotion_offer_type" disabled>
                <span class="checkmark"></span> </span></li>
            </ul>
          </li>
        </ul>
        <div class="row promoFormSec" *ngIf="type != 'PRODUCT'">
          <div class="col-lg-4">
            <ul class="promoForm3">
              <li>
                <label class="form-label">Qualifying Order Amount</label>
                <input type="number" onkeydown="return event.keyCode !== 69 && event.keyCode !== 189 && event.keyCode !== 190 && event.keyCode !== 187" name="order_amount" [(ngModel)]="order_amount" class="form-control input1" placeholder="">
                <span class="Span1">$</span> 
                <!-- <span class="Span2">Order min: $50.00</span>  -->
              </li>
              <li *ngIf="promotion_offer_type == 1">
                <label class="form-label">Discount Amount</label>
                <input type="text" name="" value="" class="form-control input2" placeholder="" name="discount_amount" [(ngModel)]="discount_amount" disabled>
                <span class="Span3">%</span> 
              </li>
              <li *ngIf="promotion_offer_type == 2">
                <label class="form-label">Discount Amount</label>
                <input type="text" name="discount_amount" [(ngModel)]="discount_amount" class="form-control input2" placeholder="" disabled>
                <span class="Span3">$</span> 
              </li>
              <li>
                <div class="form-check">
                  <input *ngIf="promotion_offer_type != 3" type="checkbox" class="form-check-input" name="offer_free_shipping" [(ngModel)]="offer_free_shipping" [checked]="promotion_offer_type == 3 || offer_free_shipping == 1" disabled>
                  <input *ngIf="promotion_offer_type == 3" type="checkbox" class="form-check-input" checked disabled >
                  <label class="form-check-label">Also offer free shipping</label>
                </div>
              </li>
            </ul>
          </div>
        </div>
        <!-- <p class="faireSplPara">Faire covers the cost of shipping for all eligible Insider members. <a>Learn More</a></p> -->
      </div>
      <div class="vendor_promotions_body" *ngIf="type == 'PRODUCT' " >
        <h3>Discount amount</h3>
        <p>The discount will apply to all the products you add to the promotion, including variants like different sizes or colors</p>
        <div class="row discountFormSec">
          <div class="col-lg-4">
            <ul class="discountForm3">
              <li>
                <label class="form-label">Discount Amount</label>
                <input type="text" name="" value="" class="form-control input1" placeholder="" name="discount_amount" [(ngModel)]="discount_amount" disabled>
                <span class="Span1">% off</span> </li>
            </ul>
          </div>
        </div>
      </div>
      <div class="vendor_promotions_body" *ngIf="type == 'PRODUCT' " >
        <h3>Recommend Additional Products</h3>
        <p><span class="grayPara">Introduce your customers to new products or recommend items that complement their order. Customers will be able to add recommended products to their order when checking out. <a>View Example</a></span></p><br >
        <h3>Added products</h3>
        <ul class="row shopInfoList">
          <li class="col-lg-10">
            <!-- <ng-autocomplete [data]="proData" [searchKeyword]="proKeyword" placeholder="Select Option" (inputFocused)='onFocused($event)' [itemTemplate]="itemTemplate2" [notFoundTemplate]="notFoundTemplate2" class="common-autosearch invoice-search"></ng-autocomplete>
            <ng-template #itemTemplate2 let-item class="ddd">
              <div class="searchBox">
                <a (click)="openInvoiceProductModal(invoiceProductContent)">
                  <span class="imgBox" ><img src="assets/images/search-img.png" alt="" /></span>
                  <span class="productInfoTxt">
                    <h4 >{{item.name}}</h4>
                    <p>SKU: AA234</p>
                  </span>
                  <span class="priceTag">$11.70</span>
                  <span class="stockTag">In stock</span>
                </a>
              </div>
                <a [innerHTML]="item.name">{{item.name}}</a>
            </ng-template>
            <ng-template #notFoundTemplate2 let-notFound >
              <div [innerHTML]="notFound"></div>
            </ng-template> -->
          </li>
        </ul>
        <ul class="row show_product_list">
          <li class="col-lg-2" *ngFor="let item of promotionDetail?.products">
            <div class="border_box complete_border_box">
              <div class="imgDiv"> <img [src]="item?.featured_image" alt="" /></div>
              <div class="txtDiv">
                <h4>{{item?.name}}</h4>
                <p>${{item?.usd_wholesale_price}}</p>
              </div>
            </div>
          </li>
        </ul>
      </div>
      <div class="vendor_promotions2_body">
        <ul class="btnList">
          <li>
            <input type="button" name="" value="Cancel" class="btn draft_btn">
          </li>
          <li>
            <input *ngIf="!btnDis" type="submit" name="" (click)="updatePromotion()" value="Save" class="btn publish_btn">
            <input *ngIf="btnDis" type="submit" name="" disabled value="Please wait..." class="btn publish_btn">
            <!-- <input type="submit" name="" value="Save" class="btn publish_btn disabled"> -->
          </li>
        </ul>
      </div>

      <!-- <div class="vendor_promotions_body">
        <h3>Promotion name</h3>
        <ul class="promForm1">
          <li>
            <label class="form-label">This is how your promotion will appear to retailers at checkout</label>
            <input type="text" name="" value="Summersale" class="form-control" disabled="disabled">
          </li>
        </ul>
      </div>
      <div class="vendor_promotions_body">
        <h3>Promotion dates</h3>
        <ul class="row dateForm1">
          <li class="col-lg-2">
            <input type="text" name="" value="25.03.2022" class="form-control calnInput" placeholder="" disabled="disabled">
          </li>
          <li class="col-lg-1 custom_cal_lg"> <span class="fromSpan">-</span> </li>
          <li class="col-lg-2">
            <input type="text" name="" value="25.03.2022" class="form-control calnInput" placeholder="">
          </li>
        </ul>
      </div>
      <div class="vendor_promotions_body">
        <h3>Promotion eligibility</h3>
        <ul class="row promoForm2">
          <li class="col-lg-3">
            <label class="form-label">Who will you be promoting to?</label>
            <ul class="formDiv">
              <li><span class="radioLabel">All my customers
                <input type="radio" name="1" disabled="disabled">
                <span class="checkmark"></span> </span> </li>
              <li><span class="radioLabel">New customers only
                <input type="radio" name="1" checked="checked" disabled="disabled">
                <span class="checkmark"></span> </span></li>
              <li><span class="radioLabel">Returning customers only
                <input type="radio" name="1" disabled="disabled">
                <span class="checkmark"></span> </span></li>
            </ul>
          </li>
          <li class="col-lg-3">
            <label class="form-label">Who will you be promoting to?</label>
            <ul class="checkBoxList">
              <li>
                <div class="form-check">
                  <input type="checkbox" class="form-check-input" checked="checked" disabled="disabled">
                  <label class="form-check-label">Qatar</label>
                </div>
              </li>
              <li>
                <div class="form-check">
                  <input type="checkbox" class="form-check-input" disabled="disabled">
                  <label class="form-check-label">Jordan</label>
                </div>
              </li>
              <li>
                <div class="form-check">
                  <input type="checkbox" class="form-check-input" disabled="disabled">
                  <label class="form-check-label">UAE</label>
                </div>
              </li>
              <li>
                <div class="form-check">
                  <input type="checkbox" class="form-check-input" disabled="disabled">
                  <label class="form-check-label">Belgium</label>
                </div>
              </li>
              <li>
                <div class="form-check">
                  <input type="checkbox" class="form-check-input" disabled="disabled">
                  <label class="form-check-label">France</label>
                </div>
              </li>
              <li>
                <div class="form-check">
                  <input type="checkbox" class="form-check-input" disabled="disabled">
                  <label class="form-check-label">UK</label>
                </div>
              </li>
              <li>
                <div class="form-check">
                  <input type="checkbox" class="form-check-input" disabled="disabled">
                  <label class="form-check-label">Germany</label>
                </div>
              </li>
            </ul>
          </li>
        </ul>
      </div>
      <div class="vendor_promotions_body">
        <h3>Promotion details</h3>
        <ul class="row promoForm2">
          <li class="col-lg-4">
            <label class="form-label">Add tiers to create a "buy more, save more" promotion</label>
            <ul class="formDiv">
              <li><span class="radioLabel">1Tier
                <input type="radio" name="2" disabled="disabled">
                <span class="checkmark"></span> </span> </li>
              <li><span class="radioLabel">2 Tiers
                <input type="radio" name="2" checked="checked" disabled="disabled">
                <span class="checkmark"></span> </span></li>
              <li><span class="radioLabel">3 Tier
                <input type="radio" name="2" disabled="disabled">
                <span class="checkmark"></span> </span></li>
            </ul>
          </li>
          <li class="col-lg-4">
            <label class="form-label">What type of promotion will you offer?</label>
            <ul class="formDiv">
              <li><span class="radioLabel">% Off
                <input type="radio" name="3" disabled="disabled">
                <span class="checkmark"></span> </span> </li>
              <li><span class="radioLabel">$ Off
                <input type="radio" name="3" checked="checked" disabled="disabled">
                <span class="checkmark"></span> </span></li>
              <li><span class="radioLabel">Free Shipping
                <input type="radio" name="3" disabled="disabled">
                <span class="checkmark"></span> </span></li>
            </ul>
          </li>
        </ul>
        <div class="row promoFormSec">
          <div class="col-lg-4">
            <ul class="promoForm3">
              <li>
                <label class="form-label">Qualifying Order Amount</label>
                <input type="text" name="" value="100" class="form-control input1" placeholder="" disabled="disabled">
                <span class="Span1">$</span> <span class="Span2">Order min: $50.00</span> </li>
              <li>
                <label class="form-label">Discount Amount</label>
                <input type="text" name="" value="5" class="form-control input2" placeholder="" disabled="disabled">
                <span class="Span3">%</span> </li>
              <li>
                <div class="form-check">
                  <input type="checkbox" class="form-check-input" checked="checked" disabled="disabled">
                  <label class="form-check-label">Also offer free shipping</label>
                </div>
              </li>
            </ul>
          </div>
        </div>
        <p class="faireSplPara">Faire covers the cost of shipping for all eligible Insider members. <a>Learn More</a></p>
      </div>
      <div class="vendor_promotions2_body">
        <ul class="btnList">
          <li>
            <input type="button" name="" value="Cancel" class="btn draft_btn">
          </li>
          <li>
            <input type="submit" name="" value="Save" class="btn publish_btn">
          </li>
        </ul>
      </div> -->
    </div>
  </div>
</div>
<ng-template #content let-modal>
  <div class="modal-header">
    <h4 class="modal-title" id="modal-basic-title">End Promotion</h4>
    <button type="button" class="btn-close" aria-label="Close" (click)="modal.dismiss('Cross click')"></button>
  </div>
  <div class="modal-body">
    <p>Are you sure you want to end this promotion?</p>
  </div>
  <div class="modal-footer">
    <button *ngIf="!changeBtnDis" type="button" class="btn btn-primary add-customer-btn" (click)="deletePromotionStatus()" >Yes</button>
    <button *ngIf="changeBtnDis" type="button" class="btn btn-primary add-customer-btn" disabled>Please wait...</button>
    <button type="button" class="btn btn-primary no-customer-btn" (click)="modal.close('Save click')">No</button>
  </div>
</ng-template>
<!-- Vendor Add Customer Information Modal End --> 

<ng-template #invoiceProductContent let-modal>
  <div class="modal-header">
    <button type="button" class="btn-close" aria-label="Close" (click)="modal.dismiss('Cross click')"></button>
  </div>
  <div class="modal-body">
    <div class="top-main-product">
      <table class="table">
        <tbody>
          <tr>
            <td><img src="assets/images/product-img.jpeg" alt=""></td>
            <td>7Up Drink 150mL (12 Pieces) سفن آب شراب غازي ١٥٠ مل ١٢ حبة</td>
          </tr>                    
        </tbody>
      </table>
    </div>
    <input type="text" class="form-control search_form" value="" placeholder="" />
    <div class="invoice-product-table_list">
      <table class="table">
        <tbody>
          <tr>
            <td><input class="form-check-input" type="checkbox"></td>
            <td><img src="assets/images/product-img.jpeg" alt=""></td>
            <td>7Up Drink 150mL (12 Pieces) سفن آب شراب غازي ١٥٠ مل ١٢ حبة</td>
            <td>In stock</td>
            <td>$1.00</td>
          </tr> 
          <tr>
            <td><input class="form-check-input" type="checkbox"></td>
            <td><img src="assets/images/product-img.jpeg" alt=""></td>
            <td>7Up Drink 150mL (12 Pieces) سفن آب شراب غازي ١٥٠ مل ١٢ حبة</td>
            <td>In stock</td>
            <td>$1.00</td>
          </tr> 
          <tr>
            <td><input class="form-check-input" type="checkbox"></td>
            <td><img src="assets/images/product-img.jpeg" alt=""></td>
            <td>7Up Drink 150mL (12 Pieces) سفن آب شراب غازي ١٥٠ مل ١٢ حبة</td>
            <td>In stock</td>
            <td>$1.00</td>
          </tr> 
          <tr>
            <td><input class="form-check-input" type="checkbox"></td>
            <td><img src="assets/images/product-img.jpeg" alt=""></td>
            <td>7Up Drink 150mL (12 Pieces) سفن آب شراب غازي ١٥٠ مل ١٢ حبة</td>
            <td>In stock</td>
            <td>$1.00</td>
          </tr> 
          <tr>
            <td><input class="form-check-input" type="checkbox"></td>
            <td><img src="assets/images/product-img.jpeg" alt=""></td>
            <td>7Up Drink 150mL (12 Pieces) سفن آب شراب غازي ١٥٠ مل ١٢ حبة</td>
            <td>In stock</td>
            <td>$1.00</td>
          </tr> 
          <tr>
            <td><input class="form-check-input" type="checkbox"></td>
            <td><img src="assets/images/product-img.jpeg" alt=""></td>
            <td>7Up Drink 150mL (12 Pieces) سفن آب شراب غازي ١٥٠ مل ١٢ حبة</td>
            <td>In stock</td>
            <td>$1.00</td>
          </tr> 
          <tr>
            <td><input class="form-check-input" type="checkbox"></td>
            <td><img src="assets/images/product-img.jpeg" alt=""></td>
            <td>7Up Drink 150mL (12 Pieces) سفن آب شراب غازي ١٥٠ مل ١٢ حبة</td>
            <td>In stock</td>
            <td>$1.00</td>
          </tr> 
          <tr>
            <td><input class="form-check-input" type="checkbox"></td>
            <td><img src="assets/images/product-img.jpeg" alt=""></td>
            <td>7Up Drink 150mL (12 Pieces) سفن آب شراب غازي ١٥٠ مل ١٢ حبة</td>
            <td>In stock</td>
            <td>$1.00</td>
          </tr> 
          <tr>
            <td><input class="form-check-input" type="checkbox"></td>
            <td><img src="assets/images/product-img.jpeg" alt=""></td>
            <td>7Up Drink 150mL (12 Pieces) سفن آب شراب غازي ١٥٠ مل ١٢ حبة</td>
            <td>In stock</td>
            <td>$1.00</td>
          </tr> 
          <tr>
            <td><input class="form-check-input" type="checkbox"></td>
            <td><img src="assets/images/product-img.jpeg" alt=""></td>
            <td>7Up Drink 150mL (12 Pieces) سفن آب شراب غازي ١٥٠ مل ١٢ حبة</td>
            <td>In stock</td>
            <td>$1.00</td>
          </tr> 
          <tr>
            <td><input class="form-check-input" type="checkbox"></td>
            <td><img src="assets/images/product-img.jpeg" alt=""></td>
            <td>7Up Drink 150mL (12 Pieces) سفن آب شراب غازي ١٥٠ مل ١٢ حبة</td>
            <td>In stock</td>
            <td>$1.00</td>
          </tr> 
          <tr>
            <td><input class="form-check-input" type="checkbox"></td>
            <td><img src="assets/images/product-img.jpeg" alt=""></td>
            <td>7Up Drink 150mL (12 Pieces) سفن آب شراب غازي ١٥٠ مل ١٢ حبة</td>
            <td>In stock</td>
            <td>$1.00</td>
          </tr> 
          <tr>
            <td><input class="form-check-input" type="checkbox"></td>
            <td><img src="assets/images/product-img.jpeg" alt=""></td>
            <td>7Up Drink 150mL (12 Pieces) سفن آب شراب غازي ١٥٠ مل ١٢ حبة</td>
            <td>In stock</td>
            <td>$1.00</td>
          </tr> 
          <tr>
            <td><input class="form-check-input" type="checkbox"></td>
            <td><img src="assets/images/product-img.jpeg" alt=""></td>
            <td>7Up Drink 150mL (12 Pieces) سفن آب شراب غازي ١٥٠ مل ١٢ حبة</td>
            <td>In stock</td>
            <td>$1.00</td>
          </tr>                    
        </tbody>
      </table>
    </div>
  </div>
  <div class="modal-footer">
    <a (click)="modal.dismiss('Cross click')" class="btn btn-primary btn-cancel">Cancel</a>
    <a (click)="modal.dismiss('Cross click')" class="btn btn-primary btn-add">Add Options</a>
  </div>
</ng-template>


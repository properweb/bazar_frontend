<app-vendor-dashboard-header></app-vendor-dashboard-header>
<div class="dashboard_body">
  <app-vendor-side-menu></app-vendor-side-menu>
  <div class="middle_vendor_dasboard">
    <div class="middle_content">
      <div class="headingBox">
        <div class="whiteHeadingBox">
          <h3>Invoice <span style="text-transform: uppercase;">#{{allDetails?.invoice_number}}</span></h3>
          <span class="payment-status-span awaiting-payment">{{allDetails?.statusText}}</span>
          <p><a routerLink="/brand-invoices">Invoicing</a></p>
          <p style="margin-top: 10px;">Last update on {{allDetails?.updated_at_str}}</p>
          <a class="delete-invoice" (click)="openCustDetAlertModal(invoiceDeleteAlertModal)"><i class="fa-solid fa-trash"></i> Delete</a>
        </div>
      </div>
      <div class="vendor_create_body">
        <ul class="invoice-sent-list">
            <li>
                <h5><i class="fa fa-check-circle-o" aria-hidden="true"></i> Your invoice was sent to {{first_name ? first_name : 'the customer'}}!</h5>
                <p>{{allDetails?.updated_at_str}}</p>
            </li>
            <li><a (click)="openAddPaymentModal(addPaymentContent)">Add customer card</a> <a (click)="openSendReminderModal(sendReminderContent)">Send reminder</a></li>
        </ul>
        <div class="clearfix"></div>
        <div class="hide-create-invoice-top" *ngIf="!customerEditShow">
            <h3>Customer Details</h3>
            <a (click)="openUserLogInModal(addCustomerContent)" class="lightbox-link add-customer-link">Add Customer</a>
            <ul class="row shopInfoList">
                <li class="col-lg-12">
                <ng-autocomplete [data]="data" [searchKeyword]="keyword" placeholder="Select Option" (inputFocused)='onFocused($event)' [itemTemplate]="itemTemplate" [notFoundTemplate]="notFoundTemplate" class="common-autosearch customer-autosearch"></ng-autocomplete>
                <ng-template #itemTemplate let-item >
                    <a [innerHTML]="item.name" (click)="onCustomerSelect(item);">{{item.name}}</a>
                </ng-template>
                <ng-template #notFoundTemplate let-notFound >
                    <div [innerHTML]="notFound"></div>
                </ng-template>
            </ul>
        </div>
        <div class="customer-info-sec" *ngIf="customerEditShow">
            <h3>Customer Details</h3>
            <h4 *ngIf="store_name">{{store_name}}</h4>
            <a class="hide-customer-info" (click)="openCustDetAlertModal(custDetAlertModal)"><img src="assets/images/cross_icon.png" alt="cross" /></a>
            <ul class="row edit-order-top-list" >
                <li class="col-md-4">
                  <div class="white-small-order-box">
                    <h5>Contact info<a class="edit-link" (click)="openUserLogInModal(editCustomerContent);"><i class="fa-solid fa-marker"></i></a></h5>
                    <ul class="row edit-details-list">
                      <li class="col-md-6">
                        <p>
                          {{first_name}} {{last_name}}<br /> 
                          {{email}}<br />
                          {{shipping_phone_code}}{{shipping_phone}}
                        </p>
                      </li>
                    </ul>
                  </div>
                </li>
                <li class="col-md-4" *ngIf="shipAddAdded">
                  <div class="white-small-order-box">
                    <h5>Shipping Details <a class="edit-link" (click)="openUserLogInModal(editShippingContent);"><i class="fa-solid fa-marker"></i></a></h5>
                    <ul class="row edit-details-list">
                      <li class="col-md-6">
                        <p class="edit-para">
                          {{shipping_name}}<br/>
                          {{shipping_street}}<br />
                          {{shipping_town}},{{shipping_state}} {{shipping_zip}}<br />
                          +{{shipping_phone_code}} {{shipping_phone}}
                        </p>
                      </li>
                    </ul>
                  </div>
                </li>
                <li class="col-md-4" *ngIf="!shipAddAdded">
                  <div class="white-small-order-box">
                    <h5>Shipping Details</h5>
                    <!-- <a (click)="openCustDetAlertModal(custDetAlertModal)"> Cross</a> -->
                    <ul class="row edit-details-list">
                      <li class="col-md-12">
                        <a class="add-payment-link" (click)="openUserLogInModal(editShippingContent)">Add shipping address</a>
                      </li>
                    </ul>
                  </div>
                </li>
                <li class="col-md-4" >
                  <div class="white-small-order-box">
                    <h5>Payment Details</h5>
                    <ul class="row edit-details-list">
                      <li class="col-md-12">
                        <a class="add-payment-link" (click)="openAddPaymentModal(addPaymentContent)">Add Payment</a>
                      </li>
                    </ul>
                  </div>
                </li>
              </ul>
        </div>
      </div>
      <div class="vendor_create_body">
        <h3>Invoice details</h3>
        <ul class="row shopInfoList">
          <li class="col-lg-10">
            <ng-autocomplete [data]="proInvoiceData" [searchKeyword]="proInvoiceKeyword" placeholder="Select Option" (inputFocused)='onFocused($event)' [itemTemplate]="itemTemplate1" [notFoundTemplate]="notFoundTemplate1" class="common-autosearch invoice-search"></ng-autocomplete>
            <ng-template #itemTemplate1 let-item class="ddd">
              <div class="searchBox">
                <a *ngIf="item?.variations?.length > 0" (click)="settingVariation(item); openInvoiceProductModal(invoiceProductContent)" >
                  <span class="imgBox" ><img [src]="item?.featured_image" alt="" /></span>
                  <span class="productInfoTxt">
                    <h4 [innerHTML]="item.name">{{item.name}}</h4>
                    <p *ngIf="item?.sku">SKU: {{item?.sku}}</p>
                  </span> 
                  <span class="priceTag" >{{item?.options_count}} Options</span>
                  <!-- <span class="stockTag">In stock</span> -->
                </a>
                <a (click)="onAddingInvoiceProduct(item)" *ngIf="item?.variations?.length <= 0" >
                  <span class="imgBox" ><img [src]="item?.featured_image" alt="" /></span>
                  <span class="productInfoTxt">
                    <h4 [innerHTML]="item.name">{{item.name}}</h4>
                    <p *ngIf="item?.sku">SKU: {{item?.sku}}</p>
                  </span>
                  <span class="priceTag" >${{item?.usd_wholesale_price}}</span>
                  <span class="stockTag">In stock</span>
                </a>
              </div>
                <!-- <a [innerHTML]="item.name">{{item.name}}</a> -->
            </ng-template>
            <ng-template #notFoundTemplate1 let-notFound >
                <div [innerHTML]="notFound"></div>
            </ng-template>
            <!-- <mat-form-field class="example-full-width invoice-details-autosearch" appearance="fill">
              <input type="text" placeholder="" aria-label="Number" matInput [matAutocomplete]="auto1" />
              <mat-autocomplete autoActiveFirstOption #auto1="matAutocomplete" class="search-autocomplete2">
                <mat-option value="">
                  <div class="searchBox">
                    <a (click)="openInvoiceProductModal(invoiceProductContent)">
                      <span class="imgBox"><img src="assets/images/search-img.png" alt="" /></span>
                      <span class="productInfoTxt">
                        <h4>Grey plate</h4>
                        <p>SKU: AA234</p>
                      </span>
                      <span class="priceTag">$11.70</span>
                      <span class="stockTag">In stock</span>
                    </a>
                  </div>
                </mat-option>
              </mat-autocomplete>
            </mat-form-field> -->
            <!-- <input type="text" class="form-control search_form" value="" placeholder="" />
            <div class="searchBox">
              <a>
                <span class="imgBox"><img src="assets/images/search-img.png" alt="" /></span>
                <span class="productInfoTxt">
                  <h4>Grey plate</h4>
                  <p>SKU: AA234</p>
                </span>
                <span class="priceTag">$11.70</span>
                <span class="stockTag">In stock</span>
              </a>
            </div> -->
          </li>
          <!-- <li class="col-lg-2">
            <a class="add_items_link" (click)="openAddCustomitemModal(addCustomitemContent)">Add custom item</a>
          </li> -->
        </ul>
      </div>
      <div class="vendor_white_create_body">
        <div class="table_sec">
          <table class="table">
            <thead>
              <tr>
                <th scope="col">Item</th>
                <th scope="col">Availability</th>
                <th scope="col">Case size</th>
                <th scope="col">Qty</th>
                <th scope="col">Wholesale price</th>
                <th scope="col">Total</th>
                <th scope="col" style="text-align: center">&nbsp;</th>
              </tr>
            </thead>
            <tbody *ngIf="selectedIvoiceProducts?.length > 0">
              <tr *ngFor="let item of selectedIvoiceProducts; let i = index;">
                <td>
                  <div class="imgDiv">
                    <img src="{{item?.featured_image}}" alt="" />
                  </div>
                  <h4 [innerHTML]="item.name">{{item?.name}}</h4><br>
                  <h4 *ngIf="item?.variation">{{item?.variation}}</h4>
                  <p *ngIf="item?.sku"> {{item?.sku}}</p>
                </td>
                <td>In stock</td>
                <td>{{item?.case_size}}</td>
                <td>
                  <span class="quantitySpan">
                    <input type="number" onkeydown="return event.keyCode !== 69" class="form-control" name="" (change)="onQtyChange($event, item?.quantity, item)" [value]="item?.quantity" />
                    units</span>
                </td>
                <td>${{item?.usd_wholesale_price}}</td>
                <td>${{item?.total}}</td>
                <td style="text-align: center">
                  <a class="removeLink" (click)="deleteInvoiceSelectedProduct(i)"><i class="fa-solid fa-trash"></i></a>
                </td>
              </tr>
            </tbody>
            <tbody *ngIf="selectedIvoiceProducts?.length == 0">
              <tr><td align="center" colspan="7" class="text-center">No products found!</td></tr>
            </tbody>
          </table>
        </div>
      </div>
      <div class="vendor_white_create_body2">
        <div class="top_create_body">
          <div class="row">
            <div class="col-lg-9">
              <div class="shipSec">
                <h4>Ship Date</h4>
                <ul class="formDiv">
                  <li>
                    <span class="radioLabel">Ship Now
                      <input type="radio" (click)="ship_now = 1;  " [checked]="ship_now == 1" />
                      <span class="checkmark"></span>
                    </span>
                  </li>
                  <!-- <li>
                    <span class="radioLabel">Preorder
                      <input type="radio" />
                      <span class="checkmark"></span>
                    </span>
                  </li> -->
                  <li>
                    <span class="radioLabel">Scheduled Ship Date
                      <input type="radio" (click)="ship_now = 0;" [checked]="ship_now == 0" />
                      <span class="checkmark"></span>
                    </span>
                  </li>
                  <li *ngIf="ship_now == 0" >
                    <div class="dp-hidden">
                      <div class="input-group">
                        <input readonly class="form-control calnInput" placeholder="yyyy-mm-dd" name="dp" [minDate]="minDate" ngbDatepicker #d="ngbDatepicker" name="ship_date" [(ngModel)]="ship_date" #ship_dateVal (click)="d.toggle()">
                      </div>
                    </div>
                  </li>
                </ul>
              </div>
            </div>
            <div class="col-lg-3">
              <table class="table amountTable">
                <tr>
                  <th>Total</th>
                  <td><strong>${{total ? total : 0}}</strong></td>
                </tr>
                <tr>
                  <th><a class="add-promotion-link" (click)="openCustDetAlertModal(addPromotionModal)">Add Promotion</a></th>
                  <td>
                    <strong *ngIf="promotionObject?.disc_amt_type == 'amount' && promotionObject?.disc_amt">${{promotionObject?.disc_amt ? promotionObject?.disc_amt : '-'}}</strong>
                    <strong *ngIf="promotionObject?.disc_amt_type == 'percent' && promotionObject?.disc_amt">{{promotionObject?.disc_amt ? promotionObject?.disc_amt : '-'}}%</strong>
                  </td>
                </tr>
                <tr>
                  <th *ngIf="promotionObject?.ship_free == false || promotionObject?.ship_free == 0"><a class="add-promotion-link" (click)="openAddShipModal(addShippingModal)">Shipping</a></th>
                  <th *ngIf="promotionObject?.ship_free == true || promotionObject?.ship_free == 1">Shipping</th>
                  <td>
                    <strong *ngIf="promotionObject?.ship_free == true || promotionObject?.ship_free == 1">Free</strong>
                    <strong *ngIf="promotionObject?.ship_free == false || promotionObject?.ship_free == 0"> {{addShipAmt ? '$' + addShipAmt : 'TBD'}}</strong>
                  </td>
                </tr>
                <tr>
                  <th>Subtotal</th>
                  <td><strong>${{subTotal? subTotal: 0}}</strong></td>
                </tr>
                <tr>
                  <th>Commission</th>
                  <td><strong>-</strong></td>
                </tr>
              </table>
            </div>
          </div>
        </div>
        <div class="bottom_create_body">
          <div class="row">
            <div class="col-lg-4">
              <ul class="formList">
                <li>
                  <label class="form-label">Note To Self</label>
                  <textarea class="form-control textAreaForm" rows="3" placeholder="Note is written here" name="self_note" [(ngModel)]="self_note" ></textarea>
                </li>
              </ul>
            </div>
          </div>
        </div>
      </div>
      <div class="vendor_create_body">
        <h3>Recommend additional products</h3>
        <p><span>Introduce your customers to new products or recommend items that complement their order. Customers will be able to add recommended products to their order when checking out. <br /> <a>View Example</a></span>
        </p>
        <h3>Add products</h3>
        <ul class="row shopInfoList">
          <li class="col-lg-10">
            <ng-autocomplete [data]="proData" [searchKeyword]="proKeyword" placeholder="Select Option" (inputFocused)='onFocused($event)' [itemTemplate]="itemTemplate2" [notFoundTemplate]="notFoundTemplate2" class="common-autosearch invoice-search"></ng-autocomplete>
            <ng-template #itemTemplate2 let-item class="ddd">
              <div class="searchBox">
                <a (click)="onAddingProduct(item);">
                  <span class="imgBox" ><img [src]="item?.featured_image" alt="" /></span>
                  <span class="productInfoTxt">
                    <h4 [innerHTML]="item.name">{{item.name}}</h4>
                    <p *ngIf="item?.sku">SKU: {{item?.sku}}</p>
                  </span>
                  <span class="priceTag" *ngIf="item?.variations?.length <= 0">${{item?.usd_wholesale_price}}</span>
                  <span class="priceTag" *ngIf="item?.variations?.length > 0">{{item?.options_count}} Options</span>
                  <span class="stockTag">In stock</span>
                </a>
              </div>
                <!-- <a [innerHTML]="item.name">{{item.name}}</a> -->
            </ng-template>
            <ng-template #notFoundTemplate2 let-notFound >
                <div [innerHTML]="notFound"></div>
            </ng-template>
            <!-- <mat-form-field class="example-full-width invoice-details-autosearch" appearance="fill">
              <input type="text" placeholder="" aria-label="Number" matInput [matAutocomplete]="auto1" />
              <mat-autocomplete autoActiveFirstOption #auto1="matAutocomplete" class="search-autocomplete2">
                <mat-option value="">
                  <div class="searchBox">
                    <a (click)="openInvoiceProductModal(invoiceProductContent)">
                      <span class="imgBox"><img src="assets/images/search-img.png" alt="" /></span>
                      <span class="productInfoTxt">
                        <h4>Grey plate</h4>
                        <p>SKU: AA234</p>
                      </span>
                      <span class="priceTag">$11.70</span>
                      <span class="stockTag">In stock</span>
                    </a>
                  </div>
                </mat-option>
              </mat-autocomplete>
            </mat-form-field> -->
            <!-- <input type="text" class="form-control search_form" value="" placeholder="" />
            <div class="searchBox">
              <a>
                <span class="imgBox"><img src="assets/images/search-img.png" alt="" /></span>
                <span class="productInfoTxt">
                  <h4>Grey plate</h4>
                  <p>SKU: AA234</p>
                </span>
                <span class="priceTag">$11.70</span>
                <span class="stockTag">In stock</span>
              </a>
            </div> -->
          </li>
          <li class="col-lg-2"></li>
        </ul>
        <ul class="row show_product_list">
          <li class="col-lg-2" *ngFor="let item of selectedProducts; let i = index;">
            <div class="border_box complete_border_box">
              <div class="imgDiv"> <img [src]="item?.featured_image" alt="" /> <a class="deleteIcon" (click)="deleteSelectedProduct(i);" ><i class="fa-solid fa-trash"></i></a> </div>
              <div class="txtDiv">
                <h4 [innerHTML]="item.name">{{item.name}}</h4>
                <p *ngIf="item?.options_count == 0">${{item?.usd_wholesale_price}}</p>
                <p *ngIf="item?.options_count">${{item?.options_count}}</p>
              </div>
            </div>
          </li>
        </ul>
      </div>
      <div class="vendor_white_create_body2">
        <div class="bottom_create_body">
          <h3>Add a note</h3>
          <p><span>Retailers are more likely to add recommendations when you write a personal message.</span></p>
          <div class="row">
            <div class="col-lg-6">
              <ul class="formList">
                <li>
                  <textarea class="form-control textAreaForm" rows="3" placeholder="Here  is sellers note" name="retailer_note" [(ngModel)]="retailer_note" ></textarea>
                  <span class="countSpan">{{retailer_note ? retailer_note.length : 0}}/500</span>
                </li>
              </ul>
            </div>
          </div>
        </div>
      </div>
      <div class="vendor_white_create_body">
        <ul class="btnList">
          <li>
            <a *ngIf="!btnDis" class="btn draft_btn" (click)="onSubmitDraft();">Draft</a>
            <a *ngIf="btnDis" class="btn draft_btn">Draft</a>
          </li>
          <li>
            <input *ngIf="!btnDis" type="submit" name="" value="Send email" class="btn publish_btn" (click)="onSubmitEmail();">
            <input *ngIf="btnDis" type="submit" name="" value="Please wait..." class="btn publish_btn" disabled>
          </li>
        </ul>
      </div>
    </div>
  </div>
</div>

<!-- Add-Customer-Modal -->
<ng-template #addCustomerContent let-modal>
  <form #addCustomerForm="ngForm" (ngSubmit)="addCustomerForm.form.valid && sendAddCustomerForm(addCustomerForm)" novalidate>
    <div class="modal-header">
      <button type="button" class="btn-close" aria-label="Close" (click)="modal.dismiss('Cross click')"></button>
      <h4>New customer</h4>
    </div>
    <div class="modal-body">
      <h3>Contact information</h3>
      <ul class="row form-list">
        <li class="col-md-6">
          <label>First Name*</label>
          <input type="text" class="form-control" placeholder="" name="first_name" [(ngModel)]="first_name" #first_nameval="ngModel" required />
          <span class="validate_errors"
            *ngIf="(first_nameval.touched || addCustomerForm.submitted) && first_nameval.errors?.['required']">
            This field is required
          </span>
        </li>
        <li class="col-md-6">
          <label>Last Name*</label>
          <input type="text" class="form-control" placeholder="" name="last_name" [(ngModel)]="last_name" #last_nameval="ngModel" required />
          <span class="validate_errors"
            *ngIf="(last_nameval.touched || addCustomerForm.submitted) && last_nameval.errors?.['required']">
            This field is required
          </span>
        </li>
        <li class="col-md-6">
          <label>Store name*</label>
          <input type="text" class="form-control" placeholder="" name="store_name" [(ngModel)]="store_name" #store_nameval="ngModel" required />
          <span class="validate_errors"
            *ngIf="(store_nameval.touched || addCustomerForm.submitted) && store_nameval.errors?.['required']">
            This field is required
          </span>
        </li>
        <li class="col-md-6">
          <label>Email*</label>
          <input type="text" class="form-control" placeholder="" name="email" [(ngModel)]="email" #emailval="ngModel" required />
          <span class="validate_errors"
            *ngIf="(emailval.touched || addCustomerForm.submitted) && emailval.errors?.['required']">
            This field is required
          </span>
        </li>
      </ul>
      <h3>Shipping address</h3>
      <ul class="row form-list">
        <li class="col-md-6">
          <input type="text" class="form-control" placeholder="Name" name="shipping_name" [(ngModel)]="shipping_name" #shipping_nameval="ngModel" required />
          <span class="validate_errors"
            *ngIf="(shipping_nameval.touched || addCustomerForm.submitted) && shipping_nameval.errors?.['required']">
            This field is required
          </span>
        </li>
        <li class="col-md-6">
          <select class="form-select" aria-label="Default select example" name="shipping_country" [(ngModel)]="shipping_country" (change)="onChangeCountry($event)" #shipping_countryval="ngModel" required >
            <option value="null" disabled selected hidden>Country</option>
            <option *ngFor="let item of countriesArray" value="{{item.id}}">{{item.country_name}}</option>
          </select>
          <span class="validate_errors"
            *ngIf="(shipping_countryval.touched || addCustomerForm.submitted) && shipping_countryval.errors?.['required']">
            This field is required
          </span>
        </li>
        <li class="col-md-6">
          <input type="text" class="form-control" placeholder="Street and Number" name="shipping_street" [(ngModel)]="shipping_street" #shipping_streetval="ngModel" required />
          <span class="validate_errors"
            *ngIf="(shipping_streetval.touched || addCustomerForm.submitted) && shipping_streetval.errors?.['required']">
            This field is required
          </span>
        </li>
        <li class="col-md-6">
          <input type="text" class="form-control" placeholder="Apt.Suite (optional)" name="shipping_suite" [(ngModel)]="shipping_suite" />
        </li>
        <li class="col-md-6">
          <select class="form-select" aria-label="Default select example" name="shipping_state" [(ngModel)]="shipping_state" (change)="onChangeState($event)" #shipping_stateval="ngModel" required>
            <option value="null" disabled selected hidden>State</option>
            <option *ngFor="let item of stateArray" value="{{item.id}}">{{item.state_name}}</option>
          </select>
          <span class="validate_errors"
            *ngIf="(shipping_stateval.touched || addCustomerForm.submitted) && shipping_stateval.errors?.['required']">
            This field is required
          </span>
        </li>
        <li class="col-md-6">
          <select class="form-select" aria-label="Default select example" name="shipping_town" [(ngModel)]="shipping_town" #shipping_townval="ngModel" required >
            <option value="null" disabled selected hidden>Town</option>
            <option *ngFor="let item of cityArray" value="{{item.id}}">{{item.city_name}}</option>
          </select>
          <span class="validate_errors"
            *ngIf="(shipping_townval.touched || addCustomerForm.submitted) && shipping_townval.errors?.['required']">
            This field is required
          </span>
        </li>
        <li class="col-md-6">
          <input type="text" class="form-control" placeholder="Zip" name="shipping_zip" [(ngModel)]="shipping_zip" #shipping_zipval="ngModel" required />
          <span class="validate_errors"
            *ngIf="(shipping_zipval.touched || addCustomerForm.submitted) && shipping_zipval.errors?.['required']">
            This field is required
          </span>
        </li>
        <li class="col-md-6">
          <div class="input-group">
            <span class="input-group-text">
              <input type="text" class="form-control telephone-input" [value]="'+'+shipping_phone_code"/>
              <select aria-label="Default select example" name="shipping_phone_code" class="form-select telephone-select" name="shipping_phone_code" [(ngModel)]="shipping_phone_code" >
                <option *ngFor="let item of countriesArray" value="{{item.phone_code}}">{{item.country_name}} <span>+{{item.phone_code}}</span> </option>
              </select>
            </span>
            <input type="number" onkeydown="return event.keyCode !== 69" class="form-control" name="phone_number" name="shipping_phone" [(ngModel)]="shipping_phone" #shipping_phoneval="ngModel" required />
            <span class="validate_errors"
              *ngIf="(shipping_phoneval.touched || addCustomerForm.submitted) && shipping_phoneval.errors?.['required']">
              This field is required
            </span>
          </div>
        </li>
      </ul>
    </div>
    <div class="modal-footer">
      <a (click)="modal.dismiss('Cross click')" class="btn btn-primary btn-cancel">Cancel</a>
      <button *ngIf="!btnDis" class="btn btn-primary btn-add" type="submit" >Add</button>
      <button *ngIf="btnDis" class="btn btn-primary btn-add" disabled type="submit" >Please wait...</button>
    </div>
  </form>
</ng-template>

<!-- Edit-Customer-Info-Modal -->
<ng-template #editCustomerContent let-modal>
  <form #editCustomerInfoForm="ngForm" (ngSubmit)="editCustomerInfoForm.form.valid && sendEditCustomerInfoForm(editCustomerInfoForm)" novalidate>
    <div class="modal-header">
      <button type="button" class="btn-close" aria-label="Close" (click)="modal.dismiss('Cross click')"></button>
      <h4>Edit customer info</h4>
    </div>
    <div class="modal-body">
      <h3>Contact information</h3>
      <ul class="row form-list">
        <li class="col-md-6">
          <label>First Name*</label>
          <input type="text" class="form-control" placeholder="" name="first_name" [(ngModel)]="first_name" #first_nameval="ngModel" required />
          <span class="validate_errors"
            *ngIf="(first_nameval.touched || editCustomerInfoForm.submitted) && first_nameval.errors?.['required']">
            This field is required
          </span>
        </li>
        <li class="col-md-6">
          <label>Last Name*</label>
          <input type="text" class="form-control" placeholder="" name="last_name" [(ngModel)]="last_name" #last_nameval="ngModel" required />
          <span class="validate_errors"
            *ngIf="(last_nameval.touched || editCustomerInfoForm.submitted) && last_nameval.errors?.['required']">
            This field is required
          </span>
        </li>
        <li class="col-md-6">
          <label>Store name*</label>
          <input type="text" class="form-control" placeholder="" name="store_name" [(ngModel)]="store_name" #store_nameval="ngModel" required />
          <span class="validate_errors"
            *ngIf="(store_nameval.touched || editCustomerInfoForm.submitted) && store_nameval.errors?.['required']">
            This field is required
          </span>
        </li>
        <li class="col-md-6">
          <label>Email*</label>
          <input type="text" class="form-control" placeholder="" name="email" [(ngModel)]="email" #emailval="ngModel" required />
          <span class="validate_errors"
            *ngIf="(emailval.touched || editCustomerInfoForm.submitted) && emailval.errors?.['required']">
            This field is required
          </span>
        </li>
      </ul>
    </div>
    <div class="modal-footer">
      <a (click)="modal.dismiss('Cross click')" class="btn btn-primary btn-cancel">Cancel</a>
      <button *ngIf="!btnDis" class="btn btn-primary btn-add" type="submit" >Add</button>
      <button *ngIf="btnDis" class="btn btn-primary btn-add" disabled type="submit" >Please wait...</button>
    </div>
  </form>
</ng-template>

<!-- Edit-shipping-Modal -->
<ng-template #editShippingContent let-modal>
  <form #editCustomerShippingForm="ngForm" (ngSubmit)="editCustomerShippingForm.form.valid && sendEditCustomerShippingForm(editCustomerShippingForm)" novalidate>
    <div class="modal-header">
      <button type="button" class="btn-close" aria-label="Close" (click)="modal.dismiss('Cross click')"></button>
      <h4>New customer</h4>
    </div>
    <div class="modal-body">
      <h3>Shipping address</h3>
      <ul class="row form-list">
        <li class="col-md-6">
          <input type="text" class="form-control" placeholder="Name" name="shipping_name" [(ngModel)]="shipping_name" #shipping_nameval="ngModel" required />
          <span class="validate_errors"
            *ngIf="(shipping_nameval.touched || editCustomerShippingForm.submitted) && shipping_nameval.errors?.['required']">
            This field is required
          </span>
        </li>
        <li class="col-md-6">
          <select class="form-select" aria-label="Default select example" name="shipping_country" [(ngModel)]="shipping_country" (change)="onChangeCountry($event)" #shipping_countryval="ngModel" required >
            <option value="null" disabled selected hidden>Country</option>
            <option *ngFor="let item of countriesArray" value="{{item.id}}">{{item.country_name}}</option>
          </select>
          <span class="validate_errors"
            *ngIf="(shipping_countryval.touched || editCustomerShippingForm.submitted) && shipping_countryval.errors?.['required']">
            This field is required
          </span>
        </li>
        <li class="col-md-6">
          <input type="text" class="form-control" placeholder="Street and Number" name="shipping_street" [(ngModel)]="shipping_street" #shipping_streetval="ngModel" required />
          <span class="validate_errors"
            *ngIf="(shipping_streetval.touched || editCustomerShippingForm.submitted) && shipping_streetval.errors?.['required']">
            This field is required
          </span>
        </li>
        <li class="col-md-6">
          <input type="text" class="form-control" placeholder="Apt.Suite (optional)" name="shipping_suite" [(ngModel)]="shipping_suite" />
        </li>
        <li class="col-md-6">
          <select class="form-select" aria-label="Default select example" name="shipping_state" [(ngModel)]="shipping_state" (change)="onChangeState($event)" #shipping_stateval="ngModel" required>
            <option value="null" disabled selected hidden>State</option>
            <option *ngFor="let item of stateArray" value="{{item.id}}">{{item.state_name}}</option>
          </select>
          <span class="validate_errors"
            *ngIf="(shipping_stateval.touched || editCustomerShippingForm.submitted) && shipping_stateval.errors?.['required']">
            This field is required
          </span>
        </li>
        <li class="col-md-6">
          <select class="form-select" aria-label="Default select example" name="shipping_town" [(ngModel)]="shipping_town" #shipping_townval="ngModel" required >
            <option value="null" disabled selected hidden>Town</option>
            <option *ngFor="let item of cityArray" value="{{item.id}}">{{item.city_name}}</option>
          </select>
          <span class="validate_errors"
            *ngIf="(shipping_townval.touched || editCustomerShippingForm.submitted) && shipping_townval.errors?.['required']">
            This field is required
          </span>
        </li>
        <li class="col-md-6">
          <input type="text" class="form-control" placeholder="Zip" name="shipping_zip" [(ngModel)]="shipping_zip" #shipping_zipval="ngModel" required />
          <span class="validate_errors"
            *ngIf="(shipping_zipval.touched || editCustomerShippingForm.submitted) && shipping_zipval.errors?.['required']">
            This field is required
          </span>
        </li>
        <li class="col-md-6">
          <div class="input-group">
            <span class="input-group-text">
              <input type="text" class="form-control telephone-input" [value]="'+'+shipping_phone_code"/>
              <select aria-label="Default select example" name="shipping_phone_code" class="form-select telephone-select" name="shipping_phone_code" [(ngModel)]="shipping_phone_code" >
                <option *ngFor="let item of countriesArray" value="{{item.phone_code}}">{{item.country_name}} <span>+{{item.phone_code}}</span> </option>
              </select>
            </span>
            <input type="number" onkeydown="return event.keyCode !== 69" class="form-control" name="phone_number" name="shipping_phone" [(ngModel)]="shipping_phone" #shipping_phoneval="ngModel" required />
            <span class="validate_errors"
              *ngIf="(shipping_phoneval.touched || editCustomerShippingForm.submitted) && shipping_phoneval.errors?.['required']">
              This field is required
            </span>
          </div>
        </li>
      </ul>
    </div>
    <div class="modal-footer">
      <a (click)="modal.dismiss('Cross click')" class="btn btn-primary btn-cancel">Cancel</a>
      <button *ngIf="!btnDis" class="btn btn-primary btn-add" type="submit" >Add</button>
      <button *ngIf="btnDis" class="btn btn-primary btn-add" disabled type="submit" >Please wait...</button>
    </div>
  </form>
</ng-template>

<!-- Add-Custom-Item-Modal -->
<ng-template #addCustomitemContent let-modal>
  <div class="modal-header">
    <button type="button" class="btn-close" aria-label="Close" (click)="modal.dismiss('Cross click')"></button>
    <h4>Add Custom item</h4>
  </div>
  <div class="modal-body">
    <ul class="row form-list">
      <li class="col-md-12">
        <label>Product / Line Item Name</label>
        <input type="text" class="form-control" placeholder="" name="custProName" [(ngModel)]="custProName" />
      </li>
      <li class="col-md-4">
        <label>Qty</label>
        <input type="number" onkeydown="return event.keyCode !== 69" class="form-control" placeholder="0" name="custProQty" [(ngModel)]="custProQty" />
      </li>
      <li class="col-md-8">
        <label>Wholesale price / unit</label>
        <input type="number" class="form-control price-input" placeholder="0.00" name="custProPrice" [(ngModel)]="custProPrice" />
        <span class="price-span">USD</span>
      </li>
    </ul>
  </div>
  <div class="modal-footer">
    <a (click)="modal.dismiss('Cross click'); onAddCustomeProduct()" class="btn btn-primary btn-add">Add custom item</a>
  </div>
</ng-template>

<!-- Invoice-Product-Modal -->
<ng-template #invoiceProductContent let-modal>
  <div class="modal-header">
    <button type="button" class="btn-close" aria-label="Close" (click)="modal.dismiss('Cross click')"></button>
  </div>
  <div class="modal-body">
    <div class="top-main-product">
      <table class="table">
        <tbody>
          <tr>
            <td><img [src]="setVariationProduct?.featured_image" alt=""></td>
            <td>{{setVariationProduct?.name}}</td>
          </tr>                    
        </tbody>
      </table>
    </div>
    <input type="text" class="form-control search_form" value="" placeholder="" name="varProSearchText" [(ngModel)]="varProSearchText" />
    <div class="invoice-product-table_list">
      <table class="table">
        <tbody>
          <tr *ngFor="let item of setProductVariants | filter:varProSearchText; let i = index;">
            <td><input class="form-check-input" type="checkbox" (change)="onVarProChecked(setVariationProduct, item, $event)" [checked]="onlySelectedIvoiceProductsId?.includes(item?.variant_id)"></td>
            <td style="width: 12%;"><img [src]="item?.featured_image" alt=""></td>
            <td>{{item?.variant}}</td>
            <td>In stock</td>
            <td>${{item?.usd_wholesale_price}}</td>
          </tr>                   
        </tbody>
      </table>
    </div>
  </div>
  <div class="modal-footer">
    <a class="btn btn-primary btn-cancel" (click)="modal.dismiss('Cross click')">Cancel</a>
    <a class="btn btn-primary btn-add" (click)="modal.dismiss('Cross click'); onAddVarOptClick()">Add Options</a>
  </div>
</ng-template>

<!-- Remove-Customer-Details-Alert-Modal -->
<ng-template #custDetAlertModal let-modal>
  <div class="modal-header">
    <button type="button" class="btn-close" aria-label="Close" (click)="modal.dismiss('Cross click')"></button>
  </div>
  <div class="modal-body">
    <p>Do you want to remove this customer from your order?</p>
  </div>
  <div class="modal-footer">
    <button type="button" (click)="onRemoveCustomerDetails();" class="btn btn-primary common_btn" >Remove</button>
    <button type="button" class="btn btn-primary back_btn" (click)="modal.dismiss('Cross click')">Never mind</button>
  </div>
</ng-template>

<!-- Add-Promotion-Modal -->
<ng-template #addPromotionModal let-modal>
  <div class="modal-header">
    <button type="button" class="btn-close" aria-label="Close" (click)="modal.dismiss('Cross click')"></button>
  </div>
  <div class="modal-body">
    <p>Add promotion</p>
    <ul class="formDiv add-promotion-form">
      <li>
        <ul class="sub-form-list">
          <li (click)="disc_amt_type = 'amount';"><span [ngClass]="disc_amt_type == 'amount' ? 'input-span' : 'input-span disabled'">$</span></li>
          <li (click)="disc_amt_type = 'percent';"><span [ngClass]="disc_amt_type == 'percent' ? 'input-span' : 'input-span disabled'">%</span></li>
          <li><input type="number" (change)="onDiscountChange($event)" onkeydown="return event.keyCode !== 69 && event.keyCode !== 189 && event.keyCode !== 187" name="" value="" class="form-control" name="disc_amt" [(ngModel)]="disc_amt"></li>
          <span class="validate_errors" *ngIf="discAmtError">{{discAmtError}}</span>
        </ul>
        <!-- <ul class="sub-form-list" *ngIf="is_discount == 1">
          <li (click)="disc_amt_type = 'amount'; disc_amt = '';"><span [ngClass]="disc_amt_type == 'amount' ? 'input-span' : 'input-span disabled'" >$</span></li>
          <li (click)="disc_amt_type = 'percent'; disc_amt = '';"><span [ngClass]="disc_amt_type == 'percent' ? 'input-span' : 'input-span disabled'" >%</span></li>
          <li *ngIf="disc_amt_type == 'amount'" ><span class="input-front-span">$</span><input type="number" (change)="onDiscountChange($event)" onkeydown="return event.keyCode !== 69 && event.keyCode !== 189 && event.keyCode !== 187" name="" value="" class="form-control" [disabled]="is_discount == 0" name="disc_amt" [(ngModel)]="disc_amt" ></li>
          <li *ngIf="disc_amt_type == 'percent'" ><input type="number" onkeydown="return event.keyCode !== 69 && event.keyCode !== 189 && event.keyCode !== 187" name="" (change)="onDiscountChange($event)" value="" class="form-control" [disabled]="is_discount == 0" name="disc_amt" [(ngModel)]="disc_amt" ><span class="input-back-span">%</span></li>
        </ul>
        <ul class="sub-form-list" *ngIf="is_discount == 0">
          <li ><span class="input-span disabled">$</span></li>
          <li ><span class="input-span disabled">%</span></li>
          <li *ngIf="disc_amt_type == 'amount'" ><span class="input-front-span">$</span><input type="number" (change)="onDiscountChange($event)" onkeydown="return event.keyCode !== 69 && event.keyCode !== 189 && event.keyCode !== 187" name="" value="" class="form-control" disabled name="disc_amt" [(ngModel)]="disc_amt" ></li>
          <li *ngIf="disc_amt_type == 'percent'" ><input type="number" onkeydown="return event.keyCode !== 69 && event.keyCode !== 189 && event.keyCode !== 187" (change)="onDiscountChange($event)" name="" value="" class="form-control" disabled name="disc_amt" [(ngModel)]="disc_amt" ><span class="input-back-span">%</span></li>
        </ul>
        <span class="validate_errors" *ngIf="discAmtError">{{discAmtError}}</span> -->
      </li>
      <li>
        <div class="form-check">
          <input type="checkbox" class="form-check-input" [checked]="ship_free == 1" name="ship_free" [(ngModel)]="ship_free" >
          <label class="form-check-label">Free shipping</label>
        </div>
      </li>
    </ul>
  </div>
  <div class="modal-footer">
    <button type="button" class="btn btn-primary common_btn" (click)="onPromoApply();">Apply</button>
  </div>
</ng-template>

<!-- Send-Reminder-Modal -->
<ng-template #sendReminderContent let-modal>
    <div class="modal-header">
        <h4>Email Reminder</h4>
        <button type="button" class="btn-close" aria-label="Close" (click)="modal.dismiss('Cross click')"></button>
    </div>
    <div class="modal-body">
        <ul class="email-subject-list">
        <li>
            <p>To:</p>
            <h5>Dem@gmail.com</h5>
        </li>
        <li>
            <p>Subject:</p>
            <h5>Action Required: Complete your order with My Amarant</h5>
        </li>
        </ul>
        <div class="inner-content">
        <h4>Example invoice email</h4>
        <h5>Invoice #XGE6XHUSXB</h5>
        <div class="email-reminder-img"><img src="assets/images/product_details_big_img.png" alt="product image" /></div>
        <div class="shadow-box">
            <h5>Invoice from My Amarant</h5>
            <h3>$1.00</h3>
            <p>Click the button below and go to Faire to add your payment info for your order from My Amarant. Your order can only be fulfilled once the invoice is confirmed.</p>
            <a class="pay-invoice-link">Pay Invoice</a>
        </div>
        </div>
    </div>
    <div class="modal-footer">
        <button type="button" class="btn btn-primary common_btn">Send Reminder</button>
    </div>
</ng-template>

<!-- Add-Payment-Modal -->
<ng-template #addPaymentContent let-modal>
    <div class="modal-header">
      <button type="button" class="btn-close" aria-label="Close" (click)="modal.dismiss('Cross click')"></button>
      <h4>Add Payment</h4>
    </div>
    <div class="modal-body">
      <ul class="row form-list">
        <li class="col-md-12">
          <label>Card Number</label>
          <input type="text" class="form-control" placeholder="" name="custProName" />
        </li>
        <li class="col-md-6">
          <label>Expires</label>
          <input type="text" class="form-control" placeholder="MM/YY" name="cardExpiry" [(ngModel)]="cardExpiry" (keyup)="formatString($event);" />
        </li>
        <li class="col-md-6">
          <label>CVV</label>
          <input type="text" class="form-control" placeholder="" name="custProPrice" />
        </li>
      </ul>
    </div>
    <div class="modal-footer">
      <a (click)="modal.dismiss('Cross click')" class="btn btn-primary btn-add">Save Card</a>
    </div>
</ng-template>


<!-- Delete-Invoice-Alert-Modal -->
<ng-template #invoiceDeleteAlertModal let-modal>
  <div class="modal-header">
    <button type="button" class="btn-close" aria-label="Close" (click)="modal.dismiss('Cross click')"></button>
  </div>
  <div class="modal-body">
    <p>Do you want to delete this invoice?</p>
  </div>
  <div class="modal-footer">
    <button type="button" (click)="deleteBrandInvoice();" class="btn btn-primary common_btn" >Delete</button>
    <button type="button" class="btn btn-primary back_btn" (click)="modal.dismiss('Cross click')">Cancel</button>
  </div>
</ng-template>

<!-- Add-Shipping-Modal -->
<ng-template #addShippingModal let-modal>
  <div class="modal-header">
    <button type="button" class="btn-close" aria-label="Close" (click)="modal.dismiss('Cross click')"></button>
  </div>
  <div class="modal-body">
    <p>Add shipping</p>
    <ul class="formDiv add-promotion-form">
      <li>
        <ul class="sub-form-list">
          <li><span Class="input-span">$</span></li>
          <!-- <li (click)="disc_amt_type = 'amount';"><span [ngClass]="disc_amt_type == 'amount' ? 'input-span' : 'input-span disabled'">$</span></li> -->
          <!-- <li (click)="disc_amt_type = 'percent';"><span [ngClass]="disc_amt_type == 'percent' ? 'input-span' : 'input-span disabled'">%</span></li> -->
          <li><input type="number" (change)="onAddShipDiscountChange($event)" onkeydown="return event.keyCode !== 69 && event.keyCode !== 189 && event.keyCode !== 187" name="" value="" class="form-control" name="addShipAmt" ></li>
          <span class="validate_errors" *ngIf="discAmtError">{{discAmtError}}</span>
        </ul>
      </li>
      <!-- <li>
        <div class="form-check">
          <input type="checkbox" class="form-check-input" [checked]="ship_free == 1" name="ship_free" [(ngModel)]="ship_free" >
          <label class="form-check-label">Free shipping</label>
        </div>
      </li> -->
    </ul>
  </div>
  <div class="modal-footer">
    <button type="button" class="btn btn-primary common_btn" (click)="onShipApply();">Apply</button>
  </div>
</ng-template>
<app-vendor-dashboard-header></app-vendor-dashboard-header>
<div class="dashboard_body">
  <app-vendor-side-menu></app-vendor-side-menu>
  <div class="middle_vendor_dasboard">
    <div class="middle_content">
      <p class="lookingGuidelinesPara">Listing face masks? Follow the <a>guidelines</a></p>
      <div class="headingBox">
        <div class="whiteHeadingBox">
          <h3>Upload Catalog </h3>
          <p><a routerLink="/products">Products</a></p>
        </div>
      </div>
      <div class="bulk_prodt_body">
        <ng-container *ngIf="customWebsiteList?.length > 0">
          <div class="upload-catelog-website-list">
            <div class="table_sec">
                <table class="table">
                  <thead>
                    <tr>
                        <th scope="col">&nbsp;</th>
                        <th scope="col">Website URL</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr *ngFor="let item of customWebsiteList; let i = index;">
                      <td><span class="radioLabel">
                        <input type="radio" name="1" [checked]="selectedExistWebsite == item?.store_url" [value]="item?.store_url" [(ngModel)]="selectedExistWebsite" (change)="addNew = false;" >
                        <span class="checkmark"></span> </span></td>
                      <td>{{item?.store_url}}</td>
                    </tr>
                  </tbody> 
                </table>
              </div>
          </div>
        </ng-container>
        <ul class="urlList">
          <li (click)="addNew = true; selectedExistWebsite = null;">
              <input type="submit" class="btn btn-primary" value="Add new">
          </li>
        </ul>
        <ng-container *ngIf="addNew">
          <ul class="urlList">
            <li>
                <label>Store URL</label>
                <input required type="text" class="form-control" placeholder="Store URL" name="Store URL" [(ngModel)]="store_url" (change)="onStoreUrlChange();">
                <span class="idSpan"></span>
                <span class="validate_errors" *ngIf="storeUrlInvalidError">{{storeUrlInvalidError}}</span>
            </li>
          </ul>
        </ng-container>
        <ng-container *ngIf="selectedExistWebsite || addNew">
          <h3>1. Download a spreadsheet</h3>
          <ul class="row bulk_prodt_list">
            <li class="col-lg-6">
              <div class="whiteBox" (click)="productType = 'existing'">
                  <span class="radioLabel">Editing existing products sku?
                    <input type="radio" name="2" [checked]="productType == 'existing'">
                    <span class="checkmark"></span> </span> 
                  <span class="catText">Your existing catalog</span>
                  <a class="btn" (click)="customExportProduct();">Download</a>
                  <!-- <a class="btn" href="{{existCatalog}}" download="yourExistingBazarCatalog.xlsx">Download</a> -->
              </div>
            </li>
            <li class="col-lg-6">
              <div class="whiteBox" (click)="productType = 'new'">
                  <span class="radioLabel">Adding new products?
                      <input type="radio" name="2" [checked]="productType == 'new'">
                      <span class="checkmark"></span> </span> 
                  <span class="catText">Blank template</span>
                  <a class="btn" href="https://staging.bazarcenter.ca/public/uploads/demo/product_sample.xlsx" download="sample.xlsx">Download</a>
              </div>
            </li>
          </ul>
          <h3>2. Upload your files</h3>

          <div class="upload-btn-wrapper" *ngIf="bulk_xlsx_names == undefined || bulk_xlsx_names == null"><button class="btn">Upload</button><input type="file" name="myfile" accept=".xlsx, .xls, .csv" (change)="getBulkUploadFiles($event)"></div>
          <table class="table" *ngIf="bulk_xlsx_names != undefined || bulk_xlsx_names != null">
            <tbody>
              <tr>
                <td>{{bulk_xlsx_names}}</td>
                <td><a class="removeLink" (click)="bulkFileDelete()"><i class="fa-solid fa-trash"></i></a></td>
              </tr>
            </tbody>
          </table>
          <!-- <div class="clearfix"></div> -->
          <!-- <h3>3. Share product images</h3>
          <p>Make sure your image file names match the products in your spreadsheet.</p>
          <div class="validate_errors" *ngIf="imageError">Only images allowed!</div>
          <div class="upload-btn-wrapper"><button class="btn">Upload</button><input type="file" name="myfile" multiple accept="image/*" (change)="getImageUploadFiles($event)"></div>
          <div class="clearfix"></div>
          <table class="table" *ngIf="img_names?.length > 0">
            <tbody>
              <tr *ngFor="let item of img_names; let i=index;">
                <td>{{item}}</td>
                <td><a class="removeLink" (click)="imageFileDelete(i)"><i class="fa-solid fa-trash"></i></a></td>
              </tr>
            </tbody>
          </table> -->

          <!-- Existing product button -->
          <div class="normal-btn-sec" *ngIf="productType == 'existing'">
            <button *ngIf="!disBtn" class="btn startUploadBtn" [disabled]="bulk_xlsx_names == undefined || bulk_xlsx_names == null" (click)="importExistingProduct();" >Start upload</button>
            <button *ngIf="disBtn" class="btn startUploadBtn" disabled >Uploading...</button>
          </div>

          <!-- New product button -->
          <div class="normal-btn-sec" *ngIf="productType == 'new'">
            <button *ngIf="!disBtn" class="btn startUploadBtn" [disabled]="bulk_xlsx_names == undefined || bulk_xlsx_names == null" (click)="importNewProduct();" >Start upload</button>
            <button *ngIf="disBtn" class="btn startUploadBtn" disabled >Uploading...</button>
          </div>

        </ng-container>

      </div>
  </div>
</div>
